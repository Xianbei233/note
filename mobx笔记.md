# 基础概念

## observable与observer

observable: 可观察的，用于修饰被观察的数据容器（状态）。被@observable修饰的数据容器（状态）会被深层观察追踪（指容器内部所有深度的key的value地址会进入一个观察列表，与深拷贝类似的处理，与Redux派的浅层观察追踪不同。不存在的key不会进入观察列表且发生变更时不会触发通知给观察者触发更新）
observer: 观察者，用于修饰需要订阅数据容器（状态）的视图。被@observer修饰的视图才能调用被观察的数据容器（状态）相关的action\computed与reaction等衍生，否则只能访问和更改数据容器（状态），相关衍生无法获取

## Derivations(衍生)

源自状态的且不会跟状态发生更进一步相互作用的就是衍生。衍生有多种形式
* **视图**
* **衍生数据**
* **后端集成**

mobx将衍生区分成两种类型：
* **Computed values(计算值)**，使用纯函数从当前可观察状态中衍生的值
* **Reaction(反应)**, 状态改变时需要自动发生的副作用，最终都要事先I/O操作

## Action

任何可以变更状态的操作，选用，推荐使用

## 数据流原则

**动作(Action)改变状态(State)，状态的改变会更新受影响的视图(Views)**

当状态改变时，所有衍生都会进行原子级的自动更新。因此永远不可能观察到中间值。（此处的原子级指状态在一个Action内发生多次变更，所有衍生只会根据最后的变更进行执行操作，不会显示/计算之前多次变更）

所有衍生默认都是同步更新。这意味着例如动作可以在改变状态之后直接可以安全地检查计算值。

计算值 是延迟（按需同步）更新的。任何不在使用状态的计算值将不会更新，直到需要它进行副作用（I/O）操作时。 如果视图不再使用，那么它会自动被垃圾回收。

所有的计算值都应该是纯净的。它们不应该用来改变状态。（指能根据状态进行纯函数的操作计算但不能对原状态发生变更操作等副作用，例如Array.prototype.slice()等会对操作对象发生变更的函数操作）